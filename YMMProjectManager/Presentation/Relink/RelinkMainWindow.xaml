<Window
    x:Class="YMMProjectManager.Presentation.Relink.RelinkMainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="素材再リンク"
    Width="1200"
    Height="720"
    WindowStartupLocation="CenterOwner">

    <DockPanel Margin="10">
        <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Margin="0,0,0,8">
            <Button Content="探索設定..." Width="120" Margin="0,0,8,0" Click="OnOpenSearchSettingsClick" />
            <Button Content="更新内容を保存" Width="140" Margin="0,0,8,0" Click="OnSaveClick" />
            <Button Content="閉じる" Width="90" Click="OnCloseClick" />
        </StackPanel>

        <TextBlock x:Name="SummaryText" DockPanel.Dock="Top" Margin="0,0,0,8" />

        <DataGrid
            x:Name="RowsGrid"
            AutoGenerateColumns="False"
            CanUserAddRows="False"
            IsReadOnly="False"
            ItemsSource="{Binding Rows}">
            <DataGrid.Columns>
                <DataGridTextColumn Header="種類" Binding="{Binding TypeHint}" IsReadOnly="True" />
                <DataGridTextColumn Header="元パス" Binding="{Binding OriginalPath}" IsReadOnly="True" Width="2*" />
                <DataGridTextColumn Header="ファイル名" Binding="{Binding FileName}" IsReadOnly="True" />
                <DataGridTextColumn Header="拡張子" Binding="{Binding Extension}" IsReadOnly="True" />
                <DataGridTextColumn Header="状態" Binding="{Binding Status}" IsReadOnly="True" />
                <DataGridTextColumn Header="候補数" Binding="{Binding CandidateCount}" IsReadOnly="True" />
                <DataGridTemplateColumn Header="再リンク先" Width="2*">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <ComboBox
                                ItemsSource="{Binding Candidates}"
                                SelectedItem="{Binding SelectedCandidate, Mode=TwoWay}"
                                IsEnabled="{Binding IsEditable}" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTextColumn Header="メッセージ" Binding="{Binding Message}" IsReadOnly="True" Width="*" />
            </DataGrid.Columns>
        </DataGrid>
    </DockPanel>
</Window>
